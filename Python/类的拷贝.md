![[Pasted image 20250714223634.png]]
![[Pasted image 20250714223732.png]]
![[Pasted image 20250714223913.png]]
![[Pasted image 20250714224004.png]]
![[Pasted image 20250714224301.png]]
# 🐍 Python 赋值与拷贝：从“贴标签”到“克隆”

> [!NOTE] 核心纲要
> 这份笔记将通过您提供的所有截图，为您彻底讲清 Python 中三个极易混淆的概念：**变量赋值**、**浅拷贝** 和 **深拷贝**。
> 您的代码和输出结果，完美地展示了第一种情况：**变量赋值**。

---

> [!example]- 第一部分：变量赋值 (您代码中的情况) - “给房子贴个新标签”
> 
> **这是您代码 `com1 = com` 正在做的事情。**
> 
> > [!abstract] 故事背景：组装电脑
> > - `CPU`, `Disk` 类是“**零件模具**”。
> > - `Computer` 类是“**组装工厂**”。
> > - `com = Computer(cpu, disk)` 是你成功组装好的一台真实电脑，并贴上标签 `com`。
> 
> ---
> > [!danger] 关键操作：`com1 = com`
> > 这行代码的真实含义是：“**请再拿一个新标签 `com1`，然后把它贴到 `com` 所在的那台电脑上。**”
> > **它没有创造任何新电脑！**
> 
> ---
> > [!question] 图解分析 (手绘图 + 输出结果)
> > - **手绘图** (`image_79ffc5.png`) 画得非常准确：变量 `com` 和 `com1` 的箭头，最终都指向了内存地址为 `4150` 的**同一个** `Computer` 对象。
> > - **输出结果** (`image_7a0446.png`) 完美印证了这一点：`com` 和 `com1` 自身的内存地址，以及它们内部 `cpu` 和 `disk` 零件的内存地址，**全部一模一样**。
> > ![image_7a0446.png](image_7a0446.png)
> 
> > [!tldr] 一句话总结
> > **变量赋值，没有复制任何东西，只是给同一个对象起了个别名。两个变量，一个实体，一改全改。**

---

> [!tip]- 第二部分：浅拷贝 (Shallow Copy) - “买新房，搬旧家具”
> 
> **这是理论图中的第一个“真复制”概念。**
> 
> > [!INFO] 核心比喻与操作
> > - **比喻**: 你买了一栋**新房子**（外层对象是新的），但为了省钱，把老房子里的**旧家具**（内部的子对象）直接搬了过去。
> > - **操作**:
> >   ```python
> >   import copy
> >   com2 = copy.copy(com)
> >   ```
> 
> > [!check] 结果会怎样？
> > - `com` 和 `com2` 是两个不同的 `Computer` 对象，它们的内存地址**不同**。
> > - 但是，`com.cpu` 和 `com2.cpu` 指向的是**同一个** `CPU` 对象，内存地址**相同**。
> 
> > [!warning] 风险提示
> > 如果你升级了新房子 `com2` 里的CPU（修改了`com2.cpu`的属性），你老房子 `com` 里的CPU也会跟着被升级，因为它们是同一个CPU！

---

> [!success]- 第三部分：深拷贝 (Deep Copy) - “买新房，再买全套新家具”
> 
> **这是理论图中最高级别的“克隆”概念。**
> 
> > [!INFO] 核心比喻与操作
> > - **比喻**: 你不仅买了一栋**新房子**，还照着老房子里所有家具的样子，**定制了一整套全新的、一模一样的家具**放进去。
> > - **操作**:
> >   ```python
> >   import copy
> >   com3 = copy.deepcopy(com)
> >   ```
> 
> > [!check] 结果会怎样？
> > - `com` 和 `com3` 的内存地址**不同**。
> > - `com.cpu` 和 `com3.cpu` 的内存地址**也不同**。
> > - `com.disk` 和 `com3.disk` 的内存地址**也不同**。
> 
> > [!done] 最终结论
> > `com` 和 `com3` 是两个**完全独立、互不干扰**的电脑对象。修改任何一个，都不会对另一个产生任何影响。

---

> [!summary] 核心区别速查表
| 概念 | 操作 | 核心比喻 | 结果 |
| :--- | :--- | :--- | :--- |
| **变量赋值** | `com1 = com` | **给房子贴新标签** | 两个变量，一个对象。完全共享。 |
| **浅拷贝** | `com2 = copy.copy(com)` | **买新房，搬旧家具** | 外层对象是新的，但内部的子对象是共享的。 |
| **深拷贝** | `com3 = copy.deepcopy(com)` | **买新房，买全套新家具** | 所有东西都被全新复制，完全独立。 |