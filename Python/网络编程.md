# ğŸ“¡ ç½‘ç»œç¼–ç¨‹æ ¸å¿ƒæ¦‚å¿µä¸å®æˆ˜

> [!TIP] æœ¬ç« å­¦ä¹ è·¯å¾„
> 1. **ç†è§£è§„åˆ™**: äº†è§£ç½‘ç»œåˆ†å±‚åè®® (OSI & TCP/IP)ã€‚
> 2. **é€‰æ‹©å·¥å…·**: æŒæ¡ TCP (å¯é ) ä¸ UDP (é«˜é€Ÿ) ä¸¤ç§æ ¸å¿ƒå·¥å…·ã€‚
> 3. **åŠ¨æ‰‹æ“ä½œ**: å­¦ä¼šä½¿ç”¨ Socket API è¿™ä¸ªâ€œæ’åº§â€è¿›è¡Œç¼–ç¨‹ã€‚
> 4. **å®æˆ˜åº”ç”¨**: ç†Ÿç»ƒç¼–å†™ TCP å’Œ UDP çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨ç¨‹åºã€‚

---

## <span style="color:#3498db;">â‘  ç½‘ç»œç¼–ç¨‹åŸºæœ¬æ¦‚å¿µ</span>

ç½‘ç»œç¼–ç¨‹çš„æœ¬è´¨å°±æ˜¯è®©**ä¸åŒè®¡ç®—æœºä¸Šçš„ç¨‹åºèƒ½å¤Ÿç›¸äº’é€šä¿¡**ã€‚å°±åƒäººä¸äººä¹‹é—´æ‰“ç”µè¯ï¼Œéœ€è¦ç”µè¯æœºï¼ˆç¡¬ä»¶ï¼‰ã€ç”µè¯çº¿ï¼ˆç‰©ç†è¿æ¥ï¼‰å’Œå…±åŒçš„è¯­è¨€ï¼ˆåè®®ï¼‰ã€‚

- **å®¢æˆ·ç«¯ (Client)**: ä¸»åŠ¨å‘èµ·è¯·æ±‚çš„ä¸€æ–¹ï¼ˆä½ çš„æµè§ˆå™¨ï¼‰ã€‚
- **æœåŠ¡å™¨ (Server)**: è¢«åŠ¨ç­‰å¾…å¹¶å¤„ç†è¯·æ±‚çš„ä¸€æ–¹ï¼ˆç½‘ç«™æœåŠ¡å™¨ï¼‰ã€‚

---

## <span style="color:#3498db;">â‘¡ ä¸ƒå±‚ä¸å››å±‚åè®® (é€šä¿¡è§„åˆ™)</span>

ä¸ºäº†è®©å¤æ‚çš„ç½‘ç»œé€šä¿¡å˜å¾—æœ‰åºï¼Œäººä»¬è®¾è®¡äº†åˆ†å±‚æ¨¡å‹ã€‚æŠŠå¤æ‚çš„ä»»åŠ¡æ‹†åˆ†æˆä¸åŒå±‚çº§çš„å°ä»»åŠ¡ã€‚

> [!QUOTE] å‘å¿«é€’æ¯”å–» ğŸ“¦
> - **åº”ç”¨å±‚**: ä½ å†™çš„ä¿¡ä»¶å†…å®¹ã€‚
> - **ä¼ è¾“å±‚**: å¿«é€’å‘˜é€‰æ‹©ç”¨â€œåŠ æ€¥ç©ºè¿â€(TCP) è¿˜æ˜¯â€œæ™®é€šé™†è¿â€(UDP)ã€‚
> - **ç½‘ç»œå±‚**: è§„åˆ’ä» A å¸‚åˆ° B å¸‚çš„æœ€ä½³è·¯çº¿ (IP å¯»å€)ã€‚
> - **ç‰©ç†å±‚**: å¡è½¦åœ¨å…¬è·¯ä¸Šå®é™…è¡Œé©¶ã€‚

| OSI ä¸ƒå±‚æ¨¡å‹ (ç†è®º) | TCP/IP å››å±‚æ¨¡å‹ (å®ç”¨) | ä¸»è¦åè®®/åŠŸèƒ½ |
| :--- | :--- | :--- |
| **åº”ç”¨å±‚ (Application)** | <span style="color:#9b59b6;">**åº”ç”¨å±‚**</span> | `HTTP`, `FTP`, `SMTP` |
| **è¡¨ç¤ºå±‚ (Presentation)** | | æ•°æ®æ ¼å¼åŒ–, åŠ å¯† |
| **ä¼šè¯å±‚ (Session)** | | å»ºç«‹/ç®¡ç†ä¼šè¯ |
| **ä¼ è¾“å±‚ (Transport)** | <span style="color:#3498db;">**ä¼ è¾“å±‚**</span> | `TCP`, `UDP` |
| **ç½‘ç»œå±‚ (Network)** | <span style="color:#e67e22;">**ç½‘ç»œå±‚**</span> | `IP` (è´Ÿè´£å¯»å€) |
| **æ•°æ®é“¾è·¯å±‚ (Data Link)** | <span style="color:#2ecc71;">**ç½‘ç»œæ¥å£å±‚**</span> | `MAC` åœ°å€, ä»¥å¤ªç½‘ |
| **ç‰©ç†å±‚ (Physical)** | | ç‰©ç†ä¿¡å·, ç½‘çº¿ |

**ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬ä¸»è¦å…³å¿ƒ <span style="color:#9b59b6;">åº”ç”¨å±‚</span> å’Œ <span style="color:#3498db;">ä¼ è¾“å±‚</span> çš„ `TCP` ä¸ `UDP`ã€‚**

---

## <span style="color:#3498db;">â‘¢ TCP vs. UDP (ä¸¤ç§æ ¸å¿ƒä¼ è¾“å·¥å…·)</span>

| ç‰¹æ€§ | <span style="color:#e74c3c;">TCP (ä¼ è¾“æ§åˆ¶åè®®)</span> | <span style="color:#f1c40f;">UDP (ç”¨æˆ·æ•°æ®æŠ¥åè®®)</span> |
| :--- | :--- | :--- |
| **æ¯”å–»** | ğŸ“ **æ‰“ç”µè¯** | ğŸ“® **å¯„æ˜ä¿¡ç‰‡** |
| **è¿æ¥** | **é¢å‘è¿æ¥** (å…ˆâ€œå–‚ï¼Œä½ å¥½â€å»ºç«‹è¿æ¥) | **æ— è¿æ¥** (ç›´æ¥å†™åœ°å€æ‰”é‚®ç­’) |
| **å¯é æ€§** | âœ… **å¯é ** (ä¿è¯é€è¾¾ï¼ŒæŒ‰åºåˆ°è¾¾) | âŒ **ä¸å¯é ** (å¯èƒ½ä¸¢å¤±ï¼Œä¸ä¿è¯é¡ºåº) |
| **é€Ÿåº¦** | è¾ƒæ…¢ (éªŒè¯ã€é‡ä¼ æœºåˆ¶å¼€é”€å¤§) | **å¿«** (åªç®¡å‘ï¼Œæ²¡æœ‰é¢å¤–å¼€é”€) |
| **åº”ç”¨åœºæ™¯** | ç½‘é¡µæµè§ˆ(HTTP), æ–‡ä»¶ä¼ è¾“(FTP), é‚®ä»¶ | è§†é¢‘ç›´æ’­, åœ¨çº¿æ¸¸æˆ, DNSæŸ¥è¯¢ |

---

## <span style="color:#3498db;">â‘£ Socket å¥—æ¥å­— (ç¼–ç¨‹çš„â€œæ’åº§â€)</span>

> [!NOTE] å®šä¹‰
> Socket æ˜¯åº”ç”¨ç¨‹åºä¸æ“ä½œç³»ç»Ÿç½‘ç»œå†…æ ¸ä¹‹é—´çš„ä¸€ä¸ª**æ¥å£**ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆå¢™ä¸Šçš„â€œ**ç½‘ç»œæ’åº§**â€ï¼Œæˆ‘ä»¬çš„ç¨‹åºé€šè¿‡è¿™ä¸ªæ’åº§æ¥æ”¶å‘ç½‘ç»œæ•°æ®ã€‚

åˆ›å»º Socket æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸¤ä»¶äº‹ï¼š
1.  **åœ°å€æ— (Address Family)**: `AF_INET` (ç”¨äº IPv4)
2.  **Socket ç±»å‹**:
    - `SOCK_STREAM`: ç”¨äº **TCP** ç¼–ç¨‹ (æµå¼ Socket)
    - `SOCK_DGRAM`: ç”¨äº **UDP** ç¼–ç¨‹ (æ•°æ®æŠ¥ Socket)

---

## <span style="color:#3498db;">â‘¤ TCP ç¼–ç¨‹å®æˆ˜ (å¯é çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨èŠå¤©)</span>

### <span style="color:#e74c3c;">TCP æœåŠ¡å™¨ç«¯ (`tcp_server.py`)</span>

```python
import socket

# 1. åˆ›å»ºä¸€ä¸ª TCP socket å¯¹è±¡
# AF_INET è¡¨ç¤ºä½¿ç”¨ IPv4, SOCK_STREAM è¡¨ç¤ºä½¿ç”¨ TCP
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# 2. ç»‘å®šæœåŠ¡å™¨çš„ IP åœ°å€å’Œç«¯å£å·
# '0.0.0.0' è¡¨ç¤ºç›‘å¬æœ¬æœºæ‰€æœ‰ç½‘ç»œæ¥å£
server_address = ('0.0.0.0', 9999)
server_socket.bind(server_address)

# 3. å¼€å§‹ç›‘å¬å®¢æˆ·ç«¯è¿æ¥ï¼Œ5 è¡¨ç¤ºå…è®¸çš„æœ€å¤§è¿æ¥æ’é˜Ÿæ•°
server_socket.listen(5)
print("æœåŠ¡å™¨å¯åŠ¨ï¼Œæ­£åœ¨ç›‘å¬ 9999 ç«¯å£...")

# 4. æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚
# accept() ä¼šé˜»å¡ç¨‹åºï¼Œç›´åˆ°æœ‰å®¢æˆ·ç«¯è¿æ¥è¿›æ¥
# client_socket æ˜¯ä¸“é—¨ä¸ºæ­¤å®¢æˆ·ç«¯æœåŠ¡çš„æ–° socket
# client_address æ˜¯å®¢æˆ·ç«¯çš„ IP å’Œç«¯å£
client_socket, client_address = server_socket.accept()
print(f"æ¥å—åˆ°æ¥è‡ª {client_address} çš„è¿æ¥")

# 5. æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®
# 1024 æ˜¯ç¼“å†²åŒºå¤§å°ï¼Œè¡¨ç¤ºä¸€æ¬¡æœ€å¤šæ¥æ”¶ 1024 å­—èŠ‚
data = client_socket.recv(1024)
print(f"æ”¶åˆ°æ¶ˆæ¯: {data.decode('utf-8')}")

# 6. å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ¶ˆæ¯
client_socket.send("ä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼æˆ‘å·²æ”¶åˆ°ä½ çš„æ¶ˆæ¯ã€‚".encode('utf-8'))

# 7. å…³é—­è¿æ¥
client_socket.close()
server_socket.close()
```

### <span style="color:#e74c3c;">TCP å®¢æˆ·ç«¯ (`tcp_client.py`)</span>
```python
import socket

# 1. åˆ›å»ºä¸€ä¸ªå’ŒæœåŠ¡å™¨ç±»å‹ç›¸åŒçš„ TCP socket
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# 2. è¿æ¥åˆ°æœåŠ¡å™¨çš„ IP å’Œç«¯å£
# '127.0.0.1' è¡¨ç¤ºæœ¬æœºåœ°å€
server_address = ('127.0.0.1', 9999)
client_socket.connect(server_address)
print("æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨...")

# 3. å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯
message = "ä½ å¥½ï¼ŒæœåŠ¡å™¨ï¼æˆ‘æ˜¯å®¢æˆ·ç«¯ã€‚"
client_socket.send(message.encode('utf-8'))

# 4. æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ¶ˆæ¯
response = client_socket.recv(1024)
print(f"æ”¶åˆ°æœåŠ¡å™¨å“åº”: {response.decode('utf-8')}")

# 5. å…³é—­è¿æ¥
client_socket.close()
```

---

## <span style="color:#3498db;">â‘¥ UDP ç¼–ç¨‹å®æˆ˜ (é«˜é€Ÿçš„ç®€å•æ¶ˆæ¯å‘é€)</span>

### <span style="color:#f1c40f;">UDP æœåŠ¡å™¨ç«¯ (`udp_server.py`)</span>
```python
import socket

# 1. åˆ›å»ºä¸€ä¸ª UDP socket å¯¹è±¡
# æ³¨æ„è¿™é‡Œæ˜¯ SOCK_DGRAM
server_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

# 2. ç»‘å®š IP å’Œç«¯å£ (å’Œ TCP ä¸€æ ·)
server_address = ('0.0.0.0', 8888)
server_socket.bind(server_address)
print("UDP æœåŠ¡å™¨å¯åŠ¨ï¼Œæ­£åœ¨ç›‘å¬ 8888 ç«¯å£...")

# 3. æ¥æ”¶æ•°æ®ï¼ŒUDP ä¸éœ€è¦ listen å’Œ accept
# recvfrom ä¼šåŒæ—¶è¿”å›æ•°æ®å’Œå‘é€æ–¹çš„åœ°å€
data, client_address = server_socket.recvfrom(1024)
print(f"æ”¶åˆ°æ¥è‡ª {client_address} çš„æ¶ˆæ¯: {data.decode('utf-8')}")

# 4. å‘å®¢æˆ·ç«¯å‘é€æ•°æ®
# sendto éœ€è¦æŒ‡å®šç›®æ ‡åœ°å€
message_to_send = "æ”¶åˆ°ä½ çš„ UDP æ¶ˆæ¯äº†ï¼".encode('utf-8')
server_socket.sendto(message_to_send, client_address)

# 5. å…³é—­ socket
server_socket.close()
```

### <span style="color:#f1c40f;">UDP å®¢æˆ·ç«¯ (`udp_client.py`)</span>
```python
import socket

# 1. åˆ›å»º UDP socket
client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

# 2. å®šä¹‰æœåŠ¡å™¨åœ°å€
server_address = ('127.0.0.1', 8888)

# 3. ç›´æ¥å‘é€æ•°æ®ï¼ŒUDP ä¸éœ€è¦ connect
message = "ä½ å¥½ UDP æœåŠ¡å™¨ï¼Œæˆ‘æ˜¯å®¢æˆ·ç«¯ï¼"
client_socket.sendto(message.encode('utf-8'), server_address)
print("æ¶ˆæ¯å·²å‘é€...")

# 4. æ¥æ”¶æœåŠ¡å™¨çš„å“åº”
response, server_addr_from = client_socket.recvfrom(1024)
print(f"æ”¶åˆ°æ¥è‡ª {server_addr_from} çš„å“åº”: {response.decode('utf-8')}")

# 5. å…³é—­ socket
client_socket.close()
```