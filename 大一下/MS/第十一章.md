![[406e8005da1e7dd80a00901afd0d5c1.jpg]]![[f75537eff502e74f84befdf09d00759.jpg]]
![[73998370707607ea23919a166b4aa78.jpg]]
![[6a3998c5c2e6f21519fd9d46e412f39.jpg]]
![[3998c5d69e0bd3b9ad5a48d7cefa66b.jpg]]
![[849089386efdd50886045b81f40059d.jpg]]

# 笔记：通信基础与UART协议 (Communication Basics & UART)

> [!abstract] 核心纲要
> 本笔记旨在深入剖析微控制器（MCU）中常用的通信方式。我们将遵循一个从宏观到微观的逻辑路径：
> 1.  **宏观对比**: **并行通信**与**串行通信**的优缺点及应用场景。
> 2.  **串行分类**: **同步通信**与**异步通信**的核心区别。
> 3.  **深度解析UART**: 全面学习**通用异步收发器 (UART)** 的定义、数据包结构、关键参数及常见错误类型。

---

### Ⅰ. 宏观对比：并行通信 vs. 串行通信

> [!info]
> 数据在设备间的传输，最基本上可以分为“并排走”和“排队走”两种方式。

> [!danger] **1. 并行通信 (Parallel Communication)**
> > - **原理**: **一次同时**传输多个数据位（例如，一个8位的字节通过8条并行的导线同时发送）。
> > - **优点**:
> >   - **高数据吞吐量 (High Data Throughput)**，尤其适合短距离传输。
> > - **缺点**:
> >   - **布线复杂 (Bulky Cabling)**: 需要大量导线，成本高，占用空间大。
> >   - **信号衰减与偏移 (Signal Degradation & Skew)**: 在长距离传输时，各条线之间的信号延迟（时钟偏移）和相互干扰（串扰）会变得非常严重。
> > - **主要应用**: 计算机内部高速、短距离的数据传输（如 **CPU与RAM之间**）。

> [!success] **2. 串行通信 (Serial Communication)**
> > - **原理**: 数据位**一个接一个地**，在一条（或少数几条）导线上排队传输。
> > - **优点**:
> >   - **成本低、空间效率高 (Cost-effective & Space-Efficient)**: 需要的导线少。
> >   - **抗干扰性好，适合长距离 (Long-Distance Friendly)**: 没有时钟偏移问题，易于处理噪声。
> > - **缺点**: 原始数据速率相对较低（但现代高速串行技术已克服此问题）。
> > - **主要应用**: **MCU与外设通信、网络通信、USB**等绝大多数现代通信场景。

---

### Ⅱ. 串行通信的两种模式：同步 vs. 异步

> [!help]
> 串行通信中，接收方如何知道何时开始读取每一位数据呢？这主要有两种同步节拍的方式。

> [!check] **1. 同步通信 (Synchronous Communication)**
> > - **核心机制**: 发送方和接收方共享**一根额外的时钟线 (CLK)**。
> > - **工作原理**: 发送方在时钟信号的特定边沿（如上升沿）发送数据，接收方则在相同的时钟边沿接收数据。时钟信号就像一个统一的节拍器，保证了双方的完美同步。
> > - **优缺点**: 开销小，数据传输效率高。但需要额外的时钟线。
> > - **例子**: **I²C, SPI**。

> [!tip] **2. 异步通信 (Asynchronous Communication)**
> > - **核心机制**: **没有共享的时钟线**。
> > - **工作原理**: 通信双方**事先约定**好一个固定的传输速率（**波特率**）。接收方平时处于监听状态，一旦检测到一个特殊的**“起始位”**信号，就开始按照约定的速率接收后续的数据位，并通过一个**“停止位”**来确认一帧数据的结束。
> > - **优缺点**: 硬件连接简单（线少），灵活性高。但每个数据包都需要额外的起始/停止位，开销较大。
> > - **例子**: **UART**。

---

### Ⅲ. 深度解析UART (通用异步收发器)

> [!example]
> **定义**: UART (Universal Asynchronous Receiver-Transmitter) 是一种实现**异步串行通信**的硬件电路和协议。它通常使用两根线（**TX发送**，**RX接收**）实现两个设备间的全双工通信。

#### **1. UART数据包（帧）结构**

> [!note]
> UART通过一个精确定义的数据帧结构，来在没有时钟线的情况下实现收发同步。



1.  **空闲状态 (Idle State)**:
    -   在没有数据传输时，发送线(TX)保持在**高电平**。
2.  **起始位 (Start Bit)**:
    -   发送方将TX线**拉低**一个比特的时间，标志着一帧数据的**开始**。接收方检测到这个下降沿后，开始准备接收数据。
3.  **数据位 (Data Bits)**:
    -   紧跟在起始位之后，是实际要传输的数据。通常是**8位**，遵循**从最低有效位(LSB)到最高有效位(MSB)**的顺序发送。
4.  **奇偶校验位 (Parity Bit) (可选)**:
    -   一个用于**基本错误检测**的附加位。可以设置为奇校验或偶校验，用于验证数据在传输过程中是否发生了个别位的错误。
5.  **停止位 (Stop Bit(s))**:
    -   发送方将TX线**拉高**1位、1.5位或2位的时间，标志着一帧数据的**结束**。

#### **2. 关键参数：波特率 (Baud Rate)**
- **定义**: 衡量**每秒钟传输的码元（符号）个数**。在UART这种二进制通信中，它**等于比特率 (Bits per second, bps)**。
- **核心要求**: **发送方和接收方必须配置成完全相同的波特率**，否则接收方将无法正确地“踩点”读取数据，导致数据解析错误。

#### **3. 常见错误类型 (Error Types)**
- **帧错误 (Framing Error)**: 接收方在期望接收到停止位（高电平）的时刻，却检测到了低电平，表明数据帧的边界识别错误。
- **奇偶校验错误 (Parity Error)**: 接收到的数据位的奇偶性，与约定的奇偶校验规则不符，表明数据在传输中可能发生了错误。