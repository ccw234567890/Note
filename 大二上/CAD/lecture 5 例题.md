## 两未知节点示例（第 9 页）——节点分析详细解答
![[Lecture 5.pdf#page=9]]

**按图重新标注（与课件一致）：**
- 电压源：左侧理想电压源 $V_s=12\ \mathrm{V}$（上端连到上母线）
- 电阻：$R_1=4\ \mathrm{k\Omega}$（在 $V_s$ 与节点 1 之间的上支路），
  $R_2=1\ \mathrm{k\Omega}$（节点 1 到地的竖支），
  $R_3=1\ \mathrm{k\Omega}$（节点 1 与节点 2 之间的上支路），
  $R_4=2\ \mathrm{k\Omega}$（节点 2 到地的竖支）
- 电流源：右侧理想电流源 $I_s=6\ \mathrm{mA}$（从地向上注入到节点 2）

**未知量：** 节点电压 $V_1$（Node 1）、$V_2$（Node 2）。参考节点（地）电压为 $0$。

---

### 1) 写 KCL（取“流出本节点为正”）
节点 1：
$$
\frac{V_1-12}{R_1}+\frac{V_1-0}{R_2}+\frac{V_1-V_2}{R_3}=0
$$

节点 2（电流源向上注入，记入“流出”为负）：
$$
\frac{V_2-V_1}{R_3}+\frac{V_2-0}{R_4}-I_s=0
$$

代入数值 $R_1=4\,\mathrm{k\Omega},\ R_2=1\,\mathrm{k\Omega},\ R_3=1\,\mathrm{k\Omega},\ R_4=2\,\mathrm{k\Omega},\ I_s=6\,\mathrm{mA}$，并把电阻单位化到“欧姆”或统一乘以 $1000$ 消去分母，可得简化方程：
$$
\frac{V_1-12}{4000}+\frac{V_1}{1000}+\frac{V_1-V_2}{1000}=0
$$
$$
\frac{V_2-V_1}{1000}+\frac{V_2}{2000}-0.006=0
$$

两式同乘 $1000$：
$$
\frac{V_1-12}{4}+V_1+(V_1-V_2)=0 \quad\Rightarrow\quad 2.25\,V_1 - V_2 = 3
$$
$$
(V_2-V_1)+\frac{V_2}{2}-6=0 \quad\Rightarrow\quad -V_1+1.5\,V_2=6
$$

---

### 2) 解线性方程组，得节点电压
$$
\begin{cases}
2.25\,V_1 - V_2 = 3 \\
-\,V_1 + 1.5\,V_2 = 6
\end{cases}
\ \Rightarrow\
V_2 \approx 6.947\ \mathrm{V},\qquad
V_1 \approx 4.421\ \mathrm{V}.
$$

---

### 3) 回代求各支路电流（用从节点指向相邻元件的方向）
- 通过 $R_1$（从左上母线 $12\ \mathrm{V}$ 指向节点 1，实际“流向节点 1”）：
$$
I_{R_1}=\frac{12-V_1}{R_1}=\frac{12-4.421}{4000}\ \mathrm{A}\approx 1.895\ \mathrm{mA}
$$

- 通过 $R_2$（从节点 1 向地）：
$$
I_{R_2}=\frac{V_1-0}{R_2}=\frac{4.421}{1000}\ \mathrm{A}\approx 4.421\ \mathrm{mA}
$$

- 通过 $R_3$（从节点 1 向节点 2）：
$$
I_{R_3}=\frac{V_1-V_2}{R_3}=\frac{4.421-6.947}{1000}\ \mathrm{A}\approx -2.527\ \mathrm{mA}
$$
（负号表示**真实方向**为从节点 2 指向节点 1，大小约 $2.527\ \mathrm{mA}$）

- 通过 $R_4$（从节点 2 向地）：
$$
I_{R_4}=\frac{V_2-0}{R_4}=\frac{6.947}{2000}\ \mathrm{A}\approx 3.474\ \mathrm{mA}
$$

- 电流源（从地向上注入节点 2）：
$$
I_s=6.000\ \mathrm{mA}\quad(\text{注入节点 2})
$$

---

### 4) 快速核对（KCL 自检）
- 在节点 1（取“流出为正”）：  
  $(V_1-12)/R_1 + V_1/R_2 + (V_1-V_2)/R_3 \approx (-1.895 + 4.421 - 2.527)\ \mathrm{mA} \approx 0$
- 在节点 2（“流出为正”）：  
  $(V_2-V_1)/R_3 + V_2/R_4 - I_s \approx (2.527 + 3.474 - 6.000)\ \mathrm{mA} \approx 0$

一切平衡，解正确。

---

### 5) 小结
- **节点电压**：$V_1\approx 4.421\ \mathrm{V}$，$V_2\approx 6.947\ \mathrm{V}$  
- **电流方向**：$R_1$ 向右、$R_2$ 向下、$R_4$ 向下；$R_3$ 的实际电流从节点 2 流向节点 1（约 $2.527\ \mathrm{mA}$）；右侧电流源向上向节点 2 注入 $6\ \mathrm{mA}$。

> 要点：先把“电源与地”确定好电位参考，再对**未知节点**逐个写 KCL；受控/独立电流源的注入方向一定要用对号，最后用 KCL 代回检查是最稳的。

---

## 第 37 页：EXAMPLE 3.8 —— 用超节点解三未知
![[Lecture 5.pdf#page=37]]

**目标**：求节点电压 $V_1,\ V_2,\ V_3$。底边为参考地 $0\ \mathrm{V}$；左侧电源把左列母线固定为 $+5\ \mathrm{V}$。

**关键观察**
1) **$V_2$ 与 $V_3$ 之间有理想电压源（标注 7 V）**，因此这两点的电压差是已知的：
$$
V_3 = V_2 + 7. \quad\text{（电压源约束，按图极性）}
$$

2) **$V_1$ 与 $V_2$ 之间也是理想电压源（图中竖向圆形源，数值按图极性使用）**。电压源与 KCL 一起使用时，最好**把它跨接的两个节点合并成“超节点”**，以避免写“不知道的源电流”。

> 本题采用：对 **超节点 $\{V_2,V_3\}$** 写 1 条 KCL，再对 **节点 $V_1$** 写 1 条 KCL，配合上面的电压源约束，共 3 条方程解 3 个未知。

---

### 1) 画出超节点并确定“外部支路”
把 $V_2$ 与 $V_3$（中、右两个节点）用虚线框成一个超节点。**属于超节点内部的元件（$V_2$ 与 $V_3$ 之间的理想电压源）不计入 KCL**；**连到超节点外部的支路**要计入 KCL。  
连到超节点外部的支路有：
- 从 $V_2$ 经过 $R_3=200\ \Omega$ 连到左母线 $+5\ \mathrm{V}$；
- 从 $V_2$ 经 $R_5=8\ \mathrm{k\Omega}$ 下接地；
- 从 $V_3$ 经 $R_4=2\ \mathrm{k\Omega}$ 下接地；
- 从 $V_3$ 经 $R_2=5\ \mathrm{k\Omega}$ 上接到 $V_1$；
- 从 $V_2$ 经“竖向电压源”接到 $V_1$（这条支路的**电流未知**，下面用 $i_s$ 表示）。

---

### 2) 在 **超节点 $\{V_2,V_3\}$** 写 KCL（统一取“流出超节点为正”）
记从 $V_1 \to V_2$ 方向流经竖向电压源的电流为 $i_s$（方向任取，一致即可），则从超节点“流出”的该支路电流就是 $-\,i_s$。  
其余各“外部支路”的电流都能用欧姆定律写成“电压差/电阻”。

$$
\frac{V_2-5}{R_3}\;+\;\frac{V_2-0}{R_5}\;+\;\frac{V_3-0}{R_4}\;+\;\frac{V_3-V_1}{R_2}\;-\;i_s\;=\;0.
\tag{SN}
$$

把题图电阻数值代入（$R_3=200\ \Omega,\ R_5=8\ \mathrm{k\Omega},\ R_4=2\ \mathrm{k\Omega},\ R_2=5\ \mathrm{k\Omega}$），并用电压源约束
$$
V_3=V_2+7
$$
可把 (SN) 化为只含 $V_1,V_2,i_s$ 的方程。

---

### 3) 在 **节点 $V_1$** 写 KCL（同样取“流出为正”）
节点 $V_1$ 向外的支路：
- 经 $R_1=1\ \mathrm{k\Omega}$ 流向左母线 $+5\ \mathrm{V}$；
- 经 $R_2=5\ \mathrm{k\Omega}$ 流向 $V_3$；
- 经竖向电压源流向 $V_2$（这条就是 $+\,i_s$，与上一步相反号）。

因此
$$
\frac{V_1-5}{R_1}\;+\;\frac{V_1-V_3}{R_2}\;+\;i_s\;=\;0.
\tag{N1}
$$

把 $R_1=1\ \mathrm{k\Omega},\ R_2=5\ \mathrm{k\Omega}$ 和 $V_3=V_2+7$ 代入，即得第二条含 $V_1,V_2,i_s$ 的方程。

---

### 4) 电压源约束（把未知数凑满）
图中竖向电压源跨接 $V_1$ 与 $V_2$。按照图上的极性，把它写成**电压差约束**：
$$
V_1 - V_2 = V_{\text{src(1↔2)}}.
\tag{VS}
$$
（$V_{\text{src(1↔2)}}$ 为该竖向源给定的数值，按图极性代正负。）

再配合右侧 7 V 源的约束
$$
V_3=V_2+7.
\tag{7V}
$$

---

### 5) 联立求解
方程组为
$$
\begin{cases}
\dfrac{V_2-5}{200}\;+\;\dfrac{V_2}{8000}\;+\;\dfrac{V_3}{2000}\;+\;\dfrac{V_3-V_1}{5000}\;-\;i_s=0,\\[8pt]
\dfrac{V_1-5}{1000}\;+\;\dfrac{V_1-V_3}{5000}\;+\;i_s=0,\\[10pt]
V_3=V_2+7,\\[4pt]
V_1 - V_2 = V_{\text{src(1↔2)}}.
\end{cases}
$$

消去 $i_s$、用 (7V) 与 (VS) 把 $V_3,V_1$ 改写成 $V_2$ 的函数，即可得到仅含 $V_2$ 的线性方程，从而解出 $V_2$，再回代得 $V_1,V_3$。

> 讲义的数值解（按其极性与源值代入）：
> $$
> V_2=1.6\ \mathrm{V},\qquad V_1=14.1\ \mathrm{V},\qquad V_3=8.6\ \mathrm{V}.
> $$

---

### 6) 为什么一定要用“超节点”？
- **原因**：电压源的支路电流**不能**直接由“节点电位差/电阻”得到；如果分别在 $V_2$、$V_3$ 写普通 KCL，会多出一个**未知电源电流**，方程数目不够。  
- **做法**：把电压源两端的节点**合并**成一个“超节点”，对这个合并区域写**一条** KCL；同时**额外补上**“电压源的电压约束”（已知的电位差），方程数就凑齐了，且无需显式求电源电流。
- **本题**：我们以 $\{V_2,V_3\}$ 为超节点写 KCL，再对 $V_1$ 写 KCL，用两条电压源约束（右侧 7 V、竖向源值）就能解出三个未知。

---

### 7) 常见坑位与自检
- **极性号**：约束式一定是“上标 + 端减 − 端”。若解出来的电压与直觉差很多，先检查符号。  
- **电源电流方向**：在超节点 KCL 里，电压源支路的电流用**辅助未知 $i_s$** 标出来；在另一个节点的 KCL 中它会以**相反的符号**出现，最终会被消掉。  
- **单位**：带入电阻时统一用 $\Omega$，或把方程两边同乘一个常数（如 $1000$、$2000$ 等）以去分母，避免小数误差。

> 结论：遇到“**电压源跨两个未知节点**”的题，**一定用超节点法**：超节点 KCL + 其它节点 KCL + 电压源约束（们）＝线性方程组，一把过。
