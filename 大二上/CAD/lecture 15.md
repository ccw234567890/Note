# Lecture 15: Operational Amplifier Circuits (运算放大器电路)

## 1. 简介与基础 (Introduction & Basics)
**涉及页面**: P1 - P3

### 什么是运算放大器 (Op-Amp)?
简单来说，运放就是一个**数学运算机器**。
* **功能**: 它不仅能放大信号，还能做加法、减法，甚至微积分（积分、微分）。
* **应用**: 在音频放大、滤波器和信号处理电路中随处可见。

### 符号与引脚

![[Lecture 15.pdf#page=2]]
![[Lecture 15.pdf#page=3]]
* 我们最关注三个端子：
    1.  **反相输入端 (-)** (Inverting Input)
    2.  **同相输入端 (+)** (Non-inverting Input)
    3.  **输出端** (Output)
* **电源**: 运放是把电源的能量转换给信号，所以需要接正电源 $V_{CC+}$ 和负电源 $V_{CC-}$。

---

## 2. 理想运放模型 (The Ideal Op-Amp Model)
**涉及页面**: P4 - P8
这是电路分析中最重要的部分。为了简化计算，我们通常假设运放是“完美”的。

### 两大“黄金法则” (Golden Rules)
在分析理想运放电路时，永远记住这两条规则，几乎能解所有题：
1.  **虚断 (Virtual Open)**: 输入阻抗无穷大 ($R_i = \infty$)。
    * *通俗解释*: 运放的输入端就像一堵墙，**电流进不去** ($i_p = 0, i_n = 0$)。
2.  **虚短 (Virtual Short)**: 开环增益无穷大。
    * *通俗解释*: 只要运放工作在正常线性区（没饱和），它会拼命调节输出，让两个输入端的电压**强制相等** ($v_p = v_n$)。
![[Lecture 15.pdf#page=4]]
![[Lecture 15.pdf#page=5]]
![[Lecture 15.pdf#page=6]]

![[Lecture 15.pdf#page=7]]
![[Lecture 15.pdf#page=8]]
> **图解**: 图中展示了 $i_p=0, i_n=0$ 以及 $v_n=v_p$ 的概念。

---

## 3. 基本放大电路 (Basic Configurations)

### A. 反相放大器 (Inverting Configuration)
**涉及页面**: P4, P6
![[Lecture 15.pdf#page=4]]
![[Lecture 15.pdf#page=6]]
* **特点**: 信号从负极 (-) 进入，正极 (+) 接地。
* **分析**:
    * 因为 $v_p = 0$ (接地)，根据“虚短”，$v_n$ 也等于 0V。
    * 电流流过 $R_1$，因为“虚断”进不去运放，所以全部流向了 $R_2$。
* **公式**: $$v_o = -\frac{R_2}{R_1}v_{s}$$
* **结论**: 输出信号被放大了，而且**相位反转**（多了个负号）。

### B. 同相放大器 (Non-Inverting Configuration)
**涉及页面**: P4, P12
![[Lecture 15.pdf#page=4]] 
![[Lecture 15.pdf#page=12]]

(参考 Fig 5.13)
* **特点**: 信号直接进正极 (+)。
* **公式**: $$v_o = (1 + \frac{R_2}{R_1})v_{s}$$
* **结论**: 输出信号与输入**同相**，且增益永远大于等于 1。

---

## 4. 进阶运算电路 (Advanced Circuits)

### A. 加法器 (Summing Amplifier)
**涉及页面**: P9 - P16
想要把几个信号混在一起（比如调音台）？就用这个。

#### 1. 反相加法器 (Inverting Summing)
![[Lecture 15.pdf#page=9]]
* **原理**: 利用 KCL（基尔霍夫电流定律），所有输入电流都在节点汇合流向反馈电阻。
* **公式**: $$v_o = -(\frac{R_f}{R_1}v_1 + \frac{R_f}{R_2}v_2 + ...)$$
* **特例**: 如果电阻都相等，就是直接求和取反：$v_o = -(v_1 + v_2)$。

#### 2. 同相加法器 (Non-Inverting Summing)
**涉及页面**: P12 - P14
![[Lecture 15.pdf#page=12]]
* **原理**: 稍微复杂一点，需要先算同相输入端的电压分压，再算放大倍数。
* **设计实例 (Example 5.7)**:
    * 目标: 设计 $v_o = 0.5v_1 + 3v_2$。
    * 方法: 通过调整 $R_1, R_2$ 和反馈电阻的比例来实现系数匹配。
    * ![[Lecture 15.pdf#page=13]] (设计好的电路图)

#### 3. 极性转换实例 (Example 5.8 & 5.9)
**涉及页面**: P15 - P18
* **任务**: 把双极性信号（$\pm 5V$）转为单极性（$0-5V$），或者反过来。
* **核心**: 其实就是利用加法器，加上一个直流偏置电压（Offset），把波形整体向上或向下平移。
* ![[Lecture 15.pdf#page=15]] (波形转换效果图)

### B. 差分放大器 (Difference Amplifier)
**涉及页面**: P17 - P18
![[Lecture 15.pdf#page=17]]
* **功能**: 计算两个信号的差值（减法）。
* **公式**: 如果所有电阻比例匹配 ($R_1=R_3, R_2=R_4$)，则：
    $$v_o = \frac{R_2}{R_1}(v_2 - v_1)$$
* 如果所有电阻都相等，就是最简单的减法：$v_o = v_2 - v_1$。

---

## 5. 非理想运放分析 (Non-Ideal Analysis)
**涉及页面**: P21 - P29
**注意**: 这是难点。之前的分析都假设运放是完美的，但在现实世界中（P20所述），输入电阻 $R_i$ 不是无穷大，输出电阻 $R_o$ 不是 0。

### 为什么学这个？
为了评估误差。当我们需要超高精度时，理想模型就不够用了。

### 复杂模型分析
![[Lecture 15.pdf#page=21]]
* **反相配置的真实情况**:
    * 推导过程非常繁琐，需要列写节点电压方程（KCL）。
    * **结论**: 即使考虑非理想特性，只要增益 $A$ 足够大，结果依然非常接近理想公式 ($v_o \approx - \frac{R_2}{R_1} v_s$)。
    * **输入/输出电阻**: 实际输入电阻约为 $R_1$，输出电阻接近 0。

* **同相配置的真实情况**:
    ![[Lecture 15.pdf#page=25]]
    * 同样通过 KCL 推导。
    * **结论**: 理想公式 ($v_o \approx (1+\frac{R_2}{R_1})v_s$) 依然是一个非常好的近似。

---

## 6. 总结 (Summary)
**涉及页面**: P30 - P31
* **理想模型**: $R_i=\infty, R_o=0, A=\infty$。记住虚短 ($v_p=v_n$) 和虚断 ($i=0$即 $i_p=i_n=0$)。
* **负反馈的作用**: 牺牲了巨大的开环增益，换来了电路的稳定性。
* **公式速查**:
    * 反相: $Gain = -R_2/R_1$
    * 同相: $Gain = 1 + R_2/R_1$
    * 加法/减法: 基于上述两种的组合。